{"ast":null,"code":"var _jsxFileName = \"/home/aka/Documents/IgnatHomeWork/ignat-task/src/p2-homeworks/h6/common/c4-SuperEditableSpan/SuperEditableSpan.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport SuperInputText from '../../../h4/common/c1-SuperInputText/SuperInputText'; // тип пропсов обычного инпута\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst SuperEditableSpan = _ref => {\n  _s();\n\n  let {\n    autoFocus,\n    // игнорировать изменение этого пропса\n    onBlur,\n    onEnter,\n    spanProps,\n    ...restProps // все остальные пропсы попадут в объект restProps\n\n  } = _ref;\n  const [editMode, setEditMode] = useState(false);\n  const {\n    children,\n    onDoubleClick,\n    className,\n    ...restSpanProps\n  } = spanProps || {};\n\n  const onEnterCallback = () => {\n    setEditMode(false); // выключить editMode при нажатии Enter\n\n    onEnter && onEnter();\n  };\n\n  const onBlurCallback = e => {\n    setEditMode(false); // выключить editMode при нажатии за пределами инпута\n\n    onBlur && onBlur(e);\n  };\n\n  const onDoubleClickCallBack = e => {\n    setEditMode(true); // включить editMode при двойном клике\n\n    onDoubleClick && onDoubleClick(e);\n  };\n\n  const spanClassName = `${'сделать красивый стиль для спана'} ${className}`;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: editMode ? /*#__PURE__*/_jsxDEV(SuperInputText, {\n      autoFocus: true // пропсу с булевым значением не обязательно указывать true\n      ,\n      onBlur: onBlurCallback,\n      onEnter: onEnterCallback,\n      ...restProps\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 21\n    }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n      onDoubleClick: onDoubleClickCallBack,\n      className: spanClassName,\n      ...restSpanProps,\n      children: children || restProps.value\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 21\n    }, this)\n  }, void 0, false);\n};\n\n_s(SuperEditableSpan, \"rVR9Tx2gSsa7LZkJIG7mlWuXVu0=\");\n\n_c = SuperEditableSpan;\nexport default SuperEditableSpan;\n\nvar _c;\n\n$RefreshReg$(_c, \"SuperEditableSpan\");","map":{"version":3,"sources":["/home/aka/Documents/IgnatHomeWork/ignat-task/src/p2-homeworks/h6/common/c4-SuperEditableSpan/SuperEditableSpan.tsx"],"names":["React","useState","SuperInputText","SuperEditableSpan","autoFocus","onBlur","onEnter","spanProps","restProps","editMode","setEditMode","children","onDoubleClick","className","restSpanProps","onEnterCallback","onBlurCallback","e","onDoubleClickCallBack","spanClassName","value"],"mappings":";;;AAAA,OAAOA,KAAP,IAAuEC,QAAvE,QAAsF,OAAtF;AACA,OAAOC,cAAP,MAA2B,qDAA3B,C,CAEA;;;;;AAgBA,MAAMC,iBAAkD,GAAG,QAStD;AAAA;;AAAA,MARD;AACIC,IAAAA,SADJ;AACe;AACXC,IAAAA,MAFJ;AAGIC,IAAAA,OAHJ;AAIIC,IAAAA,SAJJ;AAMI,OAAGC,SANP,CAMgB;;AANhB,GAQC;AACD,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BT,QAAQ,CAAU,KAAV,CAAxC;AACA,QAAM;AAACU,IAAAA,QAAD;AAAWC,IAAAA,aAAX;AAA0BC,IAAAA,SAA1B;AAAqC,OAAGC;AAAxC,MAAyDP,SAAS,IAAI,EAA5E;;AAEA,QAAMQ,eAAe,GAAG,MAAM;AAC1BL,IAAAA,WAAW,CAAC,KAAD,CAAX,CAD0B,CACP;;AAEnBJ,IAAAA,OAAO,IAAIA,OAAO,EAAlB;AACH,GAJD;;AAKA,QAAMU,cAAc,GAAIC,CAAD,IAA2C;AAC9DP,IAAAA,WAAW,CAAC,KAAD,CAAX,CAD8D,CAC3C;;AAEnBL,IAAAA,MAAM,IAAIA,MAAM,CAACY,CAAD,CAAhB;AACH,GAJD;;AAKA,QAAMC,qBAAqB,GAAID,CAAD,IAAsD;AAChFP,IAAAA,WAAW,CAAC,IAAD,CAAX,CADgF,CAC9D;;AAElBE,IAAAA,aAAa,IAAIA,aAAa,CAACK,CAAD,CAA9B;AACH,GAJD;;AAMA,QAAME,aAAa,GAAI,GAAE,kCAAmC,IAAGN,SAAU,EAAzE;AAEA,sBACI;AAAA,cACKJ,QAAQ,gBAED,QAAC,cAAD;AACI,MAAA,SAAS,MADb,CACc;AADd;AAEI,MAAA,MAAM,EAAEO,cAFZ;AAGI,MAAA,OAAO,EAAED,eAHb;AAAA,SAKQP;AALR;AAAA;AAAA;AAAA;AAAA,YAFC,gBAUD;AACI,MAAA,aAAa,EAAEU,qBADnB;AAEI,MAAA,SAAS,EAAEC,aAFf;AAAA,SAIQL,aAJR;AAAA,gBAOKH,QAAQ,IAAIH,SAAS,CAACY;AAP3B;AAAA;AAAA;AAAA;AAAA;AAXZ,mBADJ;AAyBH,CAxDD;;GAAMjB,iB;;KAAAA,iB;AA0DN,eAAeA,iBAAf","sourcesContent":["import React, {DetailedHTMLProps, InputHTMLAttributes, HTMLAttributes, useState} from 'react'\nimport SuperInputText from '../../../h4/common/c1-SuperInputText/SuperInputText'\n\n// тип пропсов обычного инпута\ntype DefaultInputPropsType = DetailedHTMLProps<InputHTMLAttributes<HTMLInputElement>, HTMLInputElement>\n// тип пропсов обычного спана\ntype DefaultSpanPropsType = DetailedHTMLProps<HTMLAttributes<HTMLSpanElement>, HTMLSpanElement>\n\n// здесь мы говорим что у нашего инпута будут такие же пропсы как у обычного инпута\n// (чтоб не писать value: string, onChange: ...; они уже все описаны в DefaultInputPropsType)\ntype SuperEditableSpanType = DefaultInputPropsType & { // и + ещё пропсы которых нет в стандартном инпуте\n    onChangeText?: (value: string) => void\n    onEnter?: () => void\n    error?: string\n    spanClassName?: string\n\n    spanProps?: DefaultSpanPropsType // пропсы для спана\n}\n\nconst SuperEditableSpan: React.FC<SuperEditableSpanType> = (\n    {\n        autoFocus, // игнорировать изменение этого пропса\n        onBlur,\n        onEnter,\n        spanProps,\n\n        ...restProps// все остальные пропсы попадут в объект restProps\n    }\n) => {\n    const [editMode, setEditMode] = useState<boolean>(false)\n    const {children, onDoubleClick, className, ...restSpanProps} = spanProps || {}\n\n    const onEnterCallback = () => {\n        setEditMode(false) // выключить editMode при нажатии Enter\n\n        onEnter && onEnter()\n    }\n    const onBlurCallback = (e: React.FocusEvent<HTMLInputElement>) => {\n        setEditMode(false) // выключить editMode при нажатии за пределами инпута\n\n        onBlur && onBlur(e)\n    }\n    const onDoubleClickCallBack = (e: React.MouseEvent<HTMLSpanElement, MouseEvent>) => {\n        setEditMode(true) // включить editMode при двойном клике\n\n        onDoubleClick && onDoubleClick(e)\n    }\n\n    const spanClassName = `${'сделать красивый стиль для спана'} ${className}`\n\n    return (\n        <>\n            {editMode\n                ? (\n                    <SuperInputText\n                        autoFocus // пропсу с булевым значением не обязательно указывать true\n                        onBlur={onBlurCallback}\n                        onEnter={onEnterCallback}\n\n                        {...restProps} // отдаём инпуту остальные пропсы если они есть (value например там внутри)\n                    />\n                ) : (\n                    <span\n                        onDoubleClick={onDoubleClickCallBack}\n                        className={spanClassName}\n\n                        {...restSpanProps}\n                    >\n                        {/*если нет захардкодженного текста для спана, то значение инпута*/}\n                        {children || restProps.value}\n                    </span>\n                )\n            }\n        </>\n    )\n}\n\nexport default SuperEditableSpan\n"]},"metadata":{},"sourceType":"module"}